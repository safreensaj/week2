<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>

<body class="flex flex-col items-center justify-center min-h-screen bg-gray-200 p-6">


  <form id="demoform" method="post" class="bg-white p-8 shadow-lg w-96 space-y-4 rounded">
    <h2 class="text-2xl font-bold mb-4">Registration Form</h2>

    <!-- NAME -->
    <div>
      <label class="block mb-1 text-gray-700">Name</label>
      <input type="text" id="name" class="w-full border rounded p-2">
      <p id="namefeedback" class="text-sm text-red-600"></p>
    </div>

    <!-- EMAIL -->
    <div>
      <label class="block mb-1 text-gray-700">Email</label>
      <input type="email" id="email" class="w-full border rounded p-2">
      <p id="emailfeedback" class="text-sm text-red-600"></p>
    </div>

    <!-- PASSWORD -->
    <div>
      <label class="block mb-1 text-gray-700">Password</label>
      <input type="password" id="password" class="border p-2 rounded w-full">
      <p id="passwordfeedback" class="text-sm text-red-600"></p>
    </div>

    <!-- GENDER -->
    <label class="block mb-1 text-gray-700">Gender</label>
    <div class="border w-full p-2 rounded text-gray-700">
      <input type="radio" value="male" name="gender"> Male
      <input type="radio" value="female" name="gender" class="ml-4"> Female
      <p id="genderfeedback" class="text-sm text-red-600"></p>
    </div>

    <!-- COUNTRY -->
    <div>
      <label class="block mb-1 text-gray-700">Country</label>
      <div class="border w-full rounded p-2">
        <select id="country" class="w-full">
          <option value="">-- Select --</option>
          <option value="india">India</option>
          <option value="usa">USA</option>
        </select>
        <p id="countryfeedback" class="text-sm text-red-600"></p>
      </div>
    </div>

    <!-- MESSAGE -->
    <label class="block mb-1 text-gray-700">Message</label>
    <textarea id="message" rows="4" class="border w-full rounded p-2"></textarea>
    <p id="messagefeedback" class="text-sm text-red-600"></p>

    <!-- LIVE PREVIEW -->
    <div class="bg-gray-100 p-3 rounded border">
      <p class="text-sm font-semibold">Live Preview:</p>
      <p id="livePreview" class="text-gray-700 min-h-[40px]"></p>
    </div>

    <button type="submit" id="submit" class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700">
      Submit
    </button>

    <p id="feedback" class="text-sm"></p>
  </form>

  <script>
    const form = document.getElementById('demoform');
    const inputname = document.getElementById('name');
    const inputemail = document.getElementById('email');
    const inputpassword = document.getElementById('password');
    const inputcountry = document.getElementById('country');
    const inputmessage = document.getElementById('message');

    const namefeedback = document.getElementById('namefeedback');
    const emailfeedback = document.getElementById('emailfeedback');
    const passwordfeedback = document.getElementById('passwordfeedback');
    const genderfeedback = document.getElementById('genderfeedback');
    const countryfeedback = document.getElementById('countryfeedback');
    const messagefeedback = document.getElementById('messagefeedback');
    const feedback = document.getElementById('feedback');
    const preview = document.getElementById('livePreview');

    // REGEX
    const namePattern = /^[A-Za-z]+\s+[A-Za-z]+$/;
    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    const passwordPattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@&!%?#]).{8,}$/;

    function nameCheck() {
      const name = inputname.value.trim();
      if (!namePattern.test(name)) {
        namefeedback.textContent = "Name must have first & last name (2 words only)";
        return false;
      }
      namefeedback.textContent = "";
      return true;
    }

    function emailCheck() {
      const email = inputemail.value.trim();
      if (!emailPattern.test(email)) {
        emailfeedback.textContent = "Invalid email format";
        return false;
      }
      emailfeedback.textContent = "";
      return true;
    }

    function passwordCheck() {
      const pass = inputpassword.value.trim();
      if (!passwordPattern.test(pass)) {
        passwordfeedback.textContent =
          "Password must include: 8 chars, 1 uppercase, 1 number, 1 symbol (@&!%?#)";
        return false;
      }
      passwordfeedback.textContent = "";
      return true;
    }

    function genderCheck() {
      const gender = document.querySelector('input[name="gender"]:checked');
      if (!gender) {
        genderfeedback.textContent = "Please select gender";
        return false;
      }
      genderfeedback.textContent = "";
      return true;
    }

    function countryCheck() {
      if (inputcountry.value === "") {
        countryfeedback.textContent = "Please select a country";
        return false;
      }
      countryfeedback.textContent = "";
      return true;
    }

    // LIVE MESSAGE PREVIEW
    inputmessage.addEventListener("input", () => {
      preview.textContent = inputmessage.value;
    });


    // FORM SUBMIT
    form.addEventListener('submit', (e) => {
      e.preventDefault();

      const ok = nameCheck() && emailCheck() && passwordCheck() && countryCheck() && genderCheck();

      if (ok) {
        feedback.textContent = "Sending...";
        feedback.className = "text-blue-600";

        setTimeout(() => {
          feedback.textContent = "Form submitted successfully!";
          feedback.className = "text-green-600";
        }, 2000);
      }
    });

    // BLUR EVENTS
    inputname.addEventListener("blur", nameCheck);
    inputemail.addEventListener("blur", emailCheck);
    inputpassword.addEventListener("blur", passwordCheck);
    inputcountry.addEventListener("blur", countryCheck);

    document.querySelectorAll('input[name="gender"]').forEach(r =>
      r.addEventListener("change", genderCheck)
    );
  </script>

</body>

</html>
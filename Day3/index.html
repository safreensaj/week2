<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>

<body class="flex items-center justify-center min-h-screen bg-gray-200">
  <form id="demoform" method="post" class="bg-white p-8 shadow-lg w-96 space-y-4">
    <h2 class="text-2xl font-bold mb-4">Registration Form</h2>
    <div>
      <label for="name" class="block mb-1 text-gray-700">Name</label>
      <input type="text" id="name" name="name" placeholder="Name" class="w-full border rounded p-2">
      <p id="namefeedback" class="mb-2 text-sm text-red-600"></p>
    </div>
    <div>
      <label for="email" class="block mb-1 text-gray-700">Email</label>
      <input type="email" id="email" name="email" class="w-full border rounded p-2">
      <p id="emailfeedback" class="mb-2 text-sm text-red-600"></p>
    </div>
    <div>
      <label for="password" class="block mb-1 text-gray-700">Password</label>
      <input type="password" id="password" name="password" class="border p-2 rounded w-full">
      <p id="passwordfeedback" class="mb-2 text-sm text-red-600"></p>
    </div>
    <label for="gender" class="block mb-1 text-gray-700">Gender</label>
    <div class="border w-full p-2 rounded text-gray-700">
      <input type="radio" value="male" name="gender">Male
      <input type="radio" value="female" name="gender">Female
      <p id="genderfeedback" class="mb-2 text-sm text-red-600"></p>
    </div>
    <div>
      <label for="country" class="block mb-1 text-gray-700">Country</label>
      <div class="border w-full rounded p-2 text-gray-700">
        <select name="country" id="country">
          <option value="">-- Select --</option>
          <option value="india">India</option>
          <option value="usa">USA</option>
        </select>
        <p id="countryfeedback" class="mb-2 text-sm text-red-600"></p>
      </div>
    </div>
    <label for="message" class="block mb-1 text-gray-700">Message</label>
    <textarea name="message" rows="4" id="message" class="border w-full rounded p-2"></textarea>
    <p id="messagefeedback" class="mb-2 text-sm text-red-600"></p>
    <button type="submit" id="submit"
      class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700">Submit</button>
    <p id="feedback" class="mb-2 text-sm"></p>
  </form>
  <script>
    const form = document.getElementById('demoform')
    const inputname = document.getElementById('name')
    const inputemail = document.getElementById('email')
    const inputpassword = document.getElementById('password')
    const inputcountry = document.getElementById('country')
    const inputmessage = document.getElementById('message')
    const feedback = document.getElementById('feedback')
    const namefeedback = document.getElementById('namefeedback')
    const emailfeedback = document.getElementById('emailfeedback')
    const passwordfeedback = document.getElementById('passwordfeedback')
    const genderfeedback = document.getElementById('genderfeedback')
    const countryfeedback = document.getElementById('countryfeedback')
    const messagefeedback = document.getElementById('messagefeedback')
    // regular expression pattern
    const namePattern = /^[A-Za-z]+\s+[A-Za-z]+$/
    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/
    const passwordPattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@&!%?#]).{8,}$/
    function nameCheck() {
      const name = inputname.value.trim()
      if (!namePattern.test(name)) {
        namefeedback.textContent = 'Incorrect name'
      } else {
        namefeedback.textContent = ""
      }
      return namePattern.test(name)
    }
    function emailCheck() {
      const email = inputemail.value.trim()
      if (!emailPattern.test(email)) {
        emailfeedback.textContent = 'Incorrect email'
      } else {
        emailfeedback.textContent = ""
      }
      return emailPattern.test(email)
    }
    function passwordCheck() {
      const password = inputpassword.value.trim()
      if (!passwordPattern.test(password)) {
        passwordfeedback.textContent = 'Please provide a strong password'
      } else {
        passwordfeedback.textContent = ""
      }
      return passwordPattern.test(password)
    }
    function countryCheck() {
      const country = inputcountry.value
      if (!country) {
        countryfeedback.textContent = 'Please select a country'
        return false
      } else {
        countryfeedback.textContent = ""
        return true
      }
    }
    function genderCheck() {
      const selected = document.querySelector('input[name="gender"]:checked')
      if (!selected) {
        genderfeedback.textContent = 'Please select gender'
        return false
      } else {
        genderfeedback.textContent = ""
        return true
      }
    }
    inputname.addEventListener('blur', nameCheck)
    inputemail.addEventListener('blur', emailCheck)
    inputpassword.addEventListener('blur', passwordCheck)
    inputcountry.addEventListener('blur', countryCheck)
    document.querySelectorAll('input[name="gender"]').forEach(radio => {
      radio.addEventListener('change', genderCheck)
    })
    form.addEventListener('submit', (e) => {
      e.preventDefault()
      const allOk = nameCheck() && emailCheck() && passwordCheck() && countryCheck() && genderCheck()
      if (allOk) {
        feedback.textContent = "All ok, form submitting..."
        feedback.className = "text-green-600"
      }
    })
  </script>

</body>

</html>